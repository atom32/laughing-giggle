# Frontier Eden

ä¸€ä¸ªåŸºäº Flask çš„ç§ç”°ç±»ç½‘é¡µç­–ç•¥æ¸¸æˆï¼Œçµæ„Ÿæºè‡ªç»å…¸çš„ã€ŠOGameã€‹ï¼Œä¸»æ‰“æ…¢èŠ‚å¥èµ„æºå»ºè®¾ã€ç§‘æŠ€å‘å±•ä¸å¤šè¯­è¨€æ”¯æŒçš„ç©æ³•ä½“éªŒã€‚

repoåå­—æ˜¯GitHubå»ºè®®ä¸‹éšæ‰‹èµ·çš„ï¼Œä»¥åä¼šæ”¹æ‰ã€‚

## ğŸ® æ¸¸æˆç®€ä»‹

> ä½ å°†ä½œä¸ºä¸€åæ˜Ÿé™…æ‹“è’è€…ï¼Œä»ä¸€ä¸ªå°å‹æ®–æ°‘åœ°å¼€å§‹ï¼Œä¸æ–­å‘å±•ä½ çš„èµ„æºç³»ç»Ÿã€ç ”ç©¶ç§‘æŠ€ã€æ‰©å±•äººå£ï¼Œå¹¶æœ€ç»ˆå»ºæˆä¸€ä¸ªé«˜æ•ˆè¿è½¬çš„å¤ªç©ºå†œä¸šæ–‡æ˜ã€‚

ä¸ä¼ ç»Ÿ OGame çš„æˆ˜æ–—ä¸æ å¤ºä¸åŒï¼Œ**laughing-giggle æ›´æ³¨é‡â€œç§ç”°â€å¼çš„å†…æ”¿å»ºè®¾**ï¼Œé€‚åˆåå¥½é•¿æœŸç»è¥ã€èµ„æºè°ƒåº¦ã€ç­–ç•¥å¸ƒå±€çš„ç©å®¶ã€‚

## ğŸ§© æ ¸å¿ƒç©æ³•ç‰¹è‰²

- ğŸŒ **èµ„æºç³»ç»Ÿ**ï¼šçŸ¿ç‰©ã€èƒ½é‡ã€æ°´æºã€äººå£ï¼Œç”Ÿäº§ä¸æ¶ˆè´¹åŠ¨æ€å˜åŒ–
- ğŸ§ª **ç§‘æŠ€æ ‘**ï¼šè§£é”æ›´é«˜çº§çš„å»ºç­‘ä¸å•ä½ï¼Œæé«˜èµ„æºæ•ˆç‡
- ğŸ—ï¸ **å»ºç­‘å»ºè®¾**ï¼šå¤šç§å¯å‡çº§å»ºç­‘ï¼Œæ¯ç§éƒ½æœ‰ç‹¬ç‰¹ä½œç”¨
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**ï¼šå†…ç½® Flask-Babel å›½é™…åŒ–ç³»ç»Ÿ
- ğŸ§  **æ…¢èŠ‚å¥å‘å±•**ï¼šæ— éœ€é¢‘ç¹ä¸Šçº¿æ“ä½œï¼Œé€‚åˆæŒ‚æœºå¼ç©æ³•

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

| æ¨¡å—         | æŠ€æœ¯                     |
|--------------|--------------------------|
| åç«¯æ¡†æ¶     | Flask                    |
| å›½é™…åŒ–       | Flask-Babel              |
| æ•°æ®åº“       | SQLiteï¼ˆå¯æ‹“å±•ä¸º PostgreSQLï¼‰|
| å‰ç«¯æ¨¡æ¿     | Jinja2 + HTML/CSS        |
| å•å…ƒæµ‹è¯•     | pytest                   |

## ğŸ—‚ï¸ ç›®å½•ç»“æ„

```

laughing-giggle/
â”œâ”€â”€ app.py                          # åº”ç”¨å…¥å£
â”œâ”€â”€ routes.py                       # æ¸¸æˆè·¯ç”±ä¸è§†å›¾é€»è¾‘
â”œâ”€â”€ models.py                       # æ¸¸æˆæ•°æ®æ¨¡å‹ï¼ˆç”¨æˆ·ã€èµ„æºã€å»ºç­‘ï¼‰
â”œâ”€â”€ utils.py                        # å·¥å…·å‡½æ•°ï¼ˆèµ„æºæ›´æ–°ã€æ—¶é—´è°ƒåº¦ç­‰ï¼‰
â”œâ”€â”€ babel.cfg                       # å›½é™…åŒ–é…ç½®
â”œâ”€â”€ migrate\_add\_language\_preference.py  # æ·»åŠ è¯­è¨€åå¥½å­—æ®µ
â”œâ”€â”€ templates/                      # å‰ç«¯ HTML æ¨¡æ¿
â”œâ”€â”€ static/                         # é™æ€æ–‡ä»¶ï¼ˆCSS/JSï¼‰
â”œâ”€â”€ instance/                       # SQLite æ•°æ®æ–‡ä»¶æˆ–æœ¬åœ°é…ç½®
â”œâ”€â”€ test\_routes.py                  # æµ‹è¯•æ¸¸æˆè·¯ç”±
â”œâ”€â”€ test\_language\_preference.py     # æµ‹è¯•è¯­è¨€åå¥½é€»è¾‘
â””â”€â”€ requirements.txt               # Python ä¾èµ–åŒ…

````

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒä¾èµ–

- Python 3.9+
- Flask
- Flask-Babel

### å®‰è£…æ­¥éª¤

```bash
git clone https://github.com/atom32/laughing-giggle.git
cd laughing-giggle
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
````

### åˆå§‹åŒ–æ•°æ®åº“

```bash
python migrate_add_language_preference.py
```

æˆ–åœ¨ `app.py` ä¸­åŠ å…¥è‡ªåŠ¨åˆ›å»ºé€»è¾‘ã€‚

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
python app.py
```

æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5000`

### åˆ‡æ¢è¯­è¨€

æ”¯æŒå¤šè¯­è¨€ UIï¼ˆä¸­æ–‡ / Englishï¼‰ï¼Œç‚¹å‡»ç•Œé¢å³ä¸Šè§’è¯­è¨€åˆ‡æ¢å³å¯ä¿å­˜ç”¨æˆ·åå¥½ã€‚

### è¿è¡Œæµ‹è¯•

```bash
pytest
```

## âš™ï¸ é…ç½®ç®¡ç†

åº”ç”¨ä½¿ç”¨åŸºäº INI æ–‡ä»¶çš„é…ç½®ç³»ç»Ÿï¼Œæ”¯æŒç¯å¢ƒç‰¹å®šçš„é…ç½®è¦†ç›–å’Œè‡ªåŠ¨é»˜è®¤é…ç½®ç”Ÿæˆã€‚

### é…ç½®æ–‡ä»¶ç»“æ„

- **é»˜è®¤é…ç½®æ–‡ä»¶**ï¼š`config/settings.ini`
- **è‡ªåŠ¨åˆ›å»º**ï¼šå¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºåŒ…å«é»˜è®¤å€¼çš„é…ç½®æ–‡ä»¶
- **ç¯å¢ƒè¦†ç›–**ï¼šæ”¯æŒ developmentã€productionã€testing ç¯å¢ƒç‰¹å®šé…ç½®

### é…ç½®é€‰é¡¹è¯´æ˜

#### åŸºç¡€åº”ç”¨é…ç½®
- `secret_key` - Flask åº”ç”¨å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼‰
- `database_uri` - æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
- `debug` - è°ƒè¯•æ¨¡å¼å¼€å…³
- `host` - æœåŠ¡å™¨ç›‘å¬åœ°å€
- `port` - æœåŠ¡å™¨ç›‘å¬ç«¯å£

#### æ¸¸æˆå¹³è¡¡é…ç½®
- `starting_coins` - æ–°ç”¨æˆ·åˆå§‹é‡‘å¸æ•°é‡
- `starting_wheat/corn/carrots` - æ–°ç”¨æˆ·åˆå§‹ä½œç‰©ç§å­æ•°é‡
- `starting_farm_size` - æ–°ç”¨æˆ·åˆå§‹å†œåœºåœ°å—æ•°é‡
- `max_level` - æ¸¸æˆæœ€å¤§ç­‰çº§é™åˆ¶
- `experience_per_level` - æ¯çº§å‡çº§æ‰€éœ€ç»éªŒå€¼

#### å›½é™…åŒ–é…ç½®
- `default_language` - é»˜è®¤ç•Œé¢è¯­è¨€ï¼ˆen/es/frï¼‰
- `available_languages` - æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰

### ç¤ºä¾‹é…ç½®æ–‡ä»¶

```ini
[DEFAULT]
# å®‰å…¨é…ç½®
secret_key = your-secret-key-here
database_uri = sqlite:///instance/farm.db

# æœåŠ¡å™¨é…ç½®
debug = false
host = 127.0.0.1
port = 5000

# æ¸¸æˆåˆå§‹èµ„æº
starting_coins = 100
starting_wheat = 10
starting_corn = 5
starting_carrots = 3
starting_farm_size = 6

# æ¸¸æˆå¹³è¡¡
max_level = 100
experience_per_level = 1000

# å›½é™…åŒ–
default_language = en
available_languages = en,es,fr

[development]
debug = true
database_uri = sqlite:///instance/farm_dev.db

[production]
debug = false
secret_key = CHANGE-THIS-IN-PRODUCTION
database_uri = sqlite:///instance/farm_prod.db

[testing]
database_uri = sqlite:///:memory:
starting_coins = 10000
```

### ç¯å¢ƒé…ç½®

é€šè¿‡ç¯å¢ƒå˜é‡æˆ–å¯åŠ¨å‚æ•°æŒ‡å®šè¿è¡Œç¯å¢ƒï¼š

```bash
# å¼€å‘ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰
python app.py

# ç”Ÿäº§ç¯å¢ƒ
FLASK_ENV=production python app.py

# æµ‹è¯•ç¯å¢ƒ
FLASK_ENV=testing python app.py

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
python -c "from app import create_app; app = create_app(config_file='custom.ini'); app.run()"
```

### å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ç”Ÿäº§ç¯å¢ƒå¯†é’¥**ï¼šå¿…é¡»ä¿®æ”¹ `secret_key` ä¸ºéšæœºå¼ºå¯†ç 
2. **æ•°æ®åº“å®‰å…¨**ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ PostgreSQL ç­‰ä¸“ä¸šæ•°æ®åº“
3. **é…ç½®æ–‡ä»¶æƒé™**ï¼šç¡®ä¿é…ç½®æ–‡ä»¶ä¸è¢«æœªæˆæƒè®¿é—®
4. **ç¯å¢ƒå˜é‡**ï¼šæ•æ„Ÿé…ç½®å¯é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–

## ğŸŒ å¤šè¯­è¨€æ”¯æŒ

åº”ç”¨å†…ç½®å®Œæ•´çš„å›½é™…åŒ–ï¼ˆi18nï¼‰ç³»ç»Ÿï¼Œæ”¯æŒå¤šè¯­è¨€ç•Œé¢å’Œç”¨æˆ·è¯­è¨€åå¥½ç®¡ç†ã€‚

### æ”¯æŒçš„è¯­è¨€

- **English (en)** - è‹±è¯­ï¼ˆé»˜è®¤ï¼‰
- **EspaÃ±ol (es)** - è¥¿ç­ç‰™è¯­
- **FranÃ§ais (fr)** - æ³•è¯­

### è¯­è¨€æ£€æµ‹ä¼˜å…ˆçº§

1. URL å‚æ•° `?lang=<language_code>`
2. ç”¨æˆ·æ•°æ®åº“ä¸­ä¿å­˜çš„è¯­è¨€åå¥½
3. ä¼šè¯ä¸­å­˜å‚¨çš„è¯­è¨€åå¥½
4. æµè§ˆå™¨ Accept-Language å¤´éƒ¨
5. ç³»ç»Ÿé»˜è®¤è¯­è¨€

### è¯­è¨€åˆ‡æ¢æ–¹å¼

#### ç”¨æˆ·ç•Œé¢åˆ‡æ¢
- ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„è¯­è¨€é€‰æ‹©å™¨
- ç™»å½•ç”¨æˆ·çš„é€‰æ‹©ä¼šä¿å­˜åˆ°æ•°æ®åº“
- è®¿å®¢ç”¨æˆ·çš„é€‰æ‹©ä¿å­˜åˆ°ä¼šè¯ä¸­

#### ç¨‹åºåŒ–åˆ‡æ¢
```bash
# ç›´æ¥è®¿é—®è¯­è¨€åˆ‡æ¢ç«¯ç‚¹
curl http://localhost:5000/set_language/es

# åœ¨ç”¨æˆ·èµ„æ–™é¡µé¢æ›´æ–°
POST /profile
Content-Type: application/x-www-form-urlencoded
language=fr
```

### ç¿»è¯‘æ–‡ä»¶ç®¡ç†

#### æå–å¯ç¿»è¯‘å­—ç¬¦ä¸²
```bash
python -m babel.messages.frontend extract -F babel.cfg -k _l -o messages.pot .
```

#### åˆå§‹åŒ–æ–°è¯­è¨€ç¿»è¯‘
```bash
python -m babel.messages.frontend init -i messages.pot -d translations -l <language_code>
```

#### æ›´æ–°ç°æœ‰ç¿»è¯‘
```bash
python -m babel.messages.frontend update -i messages.pot -d translations
```

#### ç¼–è¯‘ç¿»è¯‘æ–‡ä»¶
```bash
python -m babel.messages.frontend compile -d translations
```

### ç¿»è¯‘æ–‡ä»¶ç»“æ„

```
translations/
â”œâ”€â”€ es/
â”‚   â””â”€â”€ LC_MESSAGES/
â”‚       â”œâ”€â”€ messages.po  # è¥¿ç­ç‰™è¯­ç¿»è¯‘æºæ–‡ä»¶
â”‚       â””â”€â”€ messages.mo  # ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶
â”œâ”€â”€ fr/
â”‚   â””â”€â”€ LC_MESSAGES/
â”‚       â”œâ”€â”€ messages.po  # æ³•è¯­ç¿»è¯‘æºæ–‡ä»¶
â”‚       â””â”€â”€ messages.mo  # ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶
â””â”€â”€ messages.pot         # ç¿»è¯‘æ¨¡æ¿æ–‡ä»¶
```

### æ·»åŠ æ–°è¯­è¨€æ”¯æŒ

1. åœ¨ `config/i18n.py` ä¸­æ·»åŠ è¯­è¨€åˆ° `SUPPORTED_LANGUAGES`
2. åˆå§‹åŒ–ç¿»è¯‘æ–‡ä»¶ï¼š`python -m babel.messages.frontend init -i messages.pot -d translations -l <new_lang>`
3. ç¿»è¯‘ `translations/<new_lang>/LC_MESSAGES/messages.po` æ–‡ä»¶
4. ç¼–è¯‘ç¿»è¯‘ï¼š`python -m babel.messages.frontend compile -d translations`
5. æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„ `available_languages` åˆ—è¡¨

## ğŸ§ª æµ‹è¯•ç³»ç»Ÿ

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œè¦†ç›–é…ç½®ç®¡ç†ã€å›½é™…åŒ–åŠŸèƒ½å’Œé›†æˆæµ‹è¯•ã€‚

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m unittest discover

# è¿è¡Œç‰¹å®šæµ‹è¯•æ¨¡å—
python -m unittest test_config.py      # é…ç½®ç®¡ç†æµ‹è¯•
python -m unittest test_i18n.py        # å›½é™…åŒ–åŠŸèƒ½æµ‹è¯•
python -m unittest test_integration.py # é›†æˆæµ‹è¯•

# å•ç‹¬è¿è¡Œæµ‹è¯•æ–‡ä»¶
python test_config.py
python test_i18n.py
python test_integration.py
```

### æµ‹è¯•è¦†ç›–èŒƒå›´

#### é…ç½®ç®¡ç†æµ‹è¯• (`test_config.py`)
- INI æ–‡ä»¶åŠ è½½å’Œè§£æ
- ç¯å¢ƒæ£€æµ‹å’Œé…ç½®è¦†ç›–
- é»˜è®¤å€¼å›é€€æœºåˆ¶
- é…ç½®éªŒè¯å’Œé”™è¯¯å¤„ç†
- æ•°æ®ç±»å‹è½¬æ¢

#### å›½é™…åŒ–æµ‹è¯• (`test_i18n.py`)
- è¯­è¨€æ£€æµ‹å’Œåå¥½å¤„ç†
- ç¿»è¯‘åŠ è½½å’Œå›é€€æœºåˆ¶
- è¯­è¨€åˆ‡æ¢å’Œä¼šè¯ç®¡ç†
- æµè§ˆå™¨è¯­è¨€æ£€æµ‹
- ç¿»è¯‘æ–‡ä»¶çŠ¶æ€æ£€æŸ¥

#### é›†æˆæµ‹è¯• (`test_integration.py`)
- ç«¯åˆ°ç«¯è¯­è¨€åˆ‡æ¢æµç¨‹
- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•è¯­è¨€åå¥½
- æ¨¡æ¿æ¸²æŸ“å¤šè¯­è¨€æ”¯æŒ
- é…ç½®ç³»ç»Ÿé›†æˆæµ‹è¯•

## ğŸ“Œ åç»­å¼€å‘æ–¹å‘

* ğŸŒ å¤šæ®–æ°‘åœ°æ”¯æŒï¼ˆå¤šä¸ªæ˜Ÿçƒï¼‰
* â± èµ„æºäº§é‡è°ƒåº¦ä¼˜åŒ–ä¸ºè®¡åˆ’ä»»åŠ¡ï¼ˆAPScheduler æˆ– Celeryï¼‰
* ğŸ“± ç§»åŠ¨ç«¯é€‚é…
* ğŸ” ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€æ’è¡Œæ¦œç³»ç»Ÿ
* ğŸ“Š æ¸¸æˆçŠ¶æ€å¯è§†åŒ–ï¼ˆå›¾è¡¨å±•ç¤ºèµ„æºäº§é‡ç­‰ï¼‰

## ğŸ¤ å‚ä¸è´¡çŒ®

æ¬¢è¿æäº¤ PR æˆ– Issueï¼š

* æ·»åŠ æ–°çš„å»ºç­‘ç§ç±» / ç§‘æŠ€æ ‘èŠ‚ç‚¹
* ä¸°å¯Œå‰ç«¯äº¤äº’ä½“éªŒ
* ä¼˜åŒ–å›½é™…åŒ–ç¿»è¯‘
* ç¼–å†™æ›´å¤šæµ‹è¯•ç”¨ä¾‹

## ğŸ“„ è®¸å¯è¯

MIT License

